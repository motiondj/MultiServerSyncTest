# 언리얼 엔진 다중 서버 동기화 프레임워크 개발 체크리스트

## 🚀 개발 단계 및 모듈 구성

이 체크리스트는 초보 개발자를 위해 단계별로 구성되었으며, 각 단계마다 개발, 테스트, 검증 과정을 포함합니다. 모듈화된 접근 방식으로 독립적인 개발과 테스트가 가능합니다.

## ⭐ 핵심 원칙: 하나의 프로젝트, 다수의 서버

이 프레임워크의 핵심은 **동일한 언리얼 엔진 프로젝트**가 여러 서버에서 실행되더라도 완벽히 동기화된 하나의 시스템으로 작동하는 것입니다. 모든 모듈과 개발 단계는 이 원칙을 중심으로 설계되었습니다.

---

## 📋 단계 1: 프로젝트 설정 및 기본 구조 구축 (1-2주)

### 초기 설정
- [x] 언리얼 엔진 플러그인 프로젝트 생성
- [x] 기본 디렉토리 구조 설정
- [x] 깃(Git) 저장소 초기화 및 .gitignore 설정
- [x] README 및 기본 문서 작성

### 모듈 설계
- [x] 전체 모듈 구조 설계 다이어그램 작성
- [x] 모듈 간 인터페이스 정의
- [x] 클래스 구조 초안 작성

### 빌드 환경 구성
- [x] 빌드 스크립트 설정
- [x] 의존성 라이브러리 식별 및 통합
- [x] 테스트 프레임워크 설정

### 단계 1 빌드 및 검증
- [x] 빈 플러그인이 성공적으로 컴파일되는지 확인
- [x] 언리얼 엔진에 플러그인 로드 테스트
- [x] 기본 로깅 시스템 작동 확인

---

## 📋 단계 2: 환경 감지 및 네트워크 기본 기능 개발 (2-3주)

### 모듈 1: 환경 감지 시스템
- [x] 클래스 구조 구현
- [x] 하드웨어 젠락(Quadro Sync) 감지 기능
  - [x] 젠락 장치 검색 함수
  - [x] 젠락 상태 기본 보고 기능
- [x] nDisplay 감지 기능
  - [x] nDisplay 모듈 존재 여부 확인
  - [x] 기본 설정 읽기 기능
- [x] 네트워크 인터페이스 탐색 기능

### 모듈 2: 기본 네트워크 통신 시스템
- [x] UDP 소켓 통신 기본 클래스 구현
- [x] 간단한 메시지 송수신 기능
- [x] 서버 탐색 기본 메커니즘
  - [x] 브로드캐스트 메시지 전송
  - [x] 응답 처리 기능
- [x] 프로젝트 식별 시스템
  - [x] 프로젝트 고유 ID 생성 및 검증
  - [x] 프로젝트 버전 일치 확인
  - [x] 동일 프로젝트 인스턴스 자동 감지

### 단계 2 테스트 및 검증
- [x] 환경 감지 모듈 단위 테스트
- [x] 기본 네트워크 연결 테스트
- [x] 로컬 환경에서 두 인스턴스 간 기본 통신 테스트
- [x] 플러그인 GUI에 감지된 환경 정보 표시

---

## 📋 단계 3: 시간 동기화 기본 기능 구현 (3-4주)

### 모듈 3: 기본 PTP 구현
- [x] PTP 메시지 구조 정의
  - [x] FPTPMessageHeader 구조체 구현
  - [x] FPTPTimestamp 구조체 구현
  - [x] 메시지 타입별 구조체 구현 (Sync, DelayReq, FollowUp, DelayResp)
  - [x] 메시지 타입 열거형 정의 (EPTPMessageType)
- [x] 기본 타임스탬핑 기능
  - [x] 마이크로초 단위 정밀 타임스탬프 생성 함수 구현
  - [x] 타임스탬프 변환 함수 구현 (마이크로초 <-> 초/나노초)
  - [x] 메시지 생성 시 타임스탬프 포함 로직 구현
- [x] 간단한 마스터-슬레이브 시간 동기화
  - [x] Sync 메시지 처리 로직 구현
    - [x] 마스터 모드에서 주기적 Sync 메시지 전송
    - [x] 슬레이브 모드에서 Sync 메시지 수신 및 T2 저장
  - [x] Follow-Up 메시지 처리 로직 구현
    - [x] 마스터 모드에서 정확한 타임스탬프 전송
    - [x] 슬레이브 모드에서 수신 및 T1 추출
  - [x] DelayReq/DelayResp 메시지 처리 로직 구현
    - [x] 슬레이브 모드에서 DelayReq 메시지 전송 및 T3 저장
    - [x] 마스터 모드에서 DelayReq 수신 및 DelayResp 응답
    - [x] 슬레이브 모드에서 DelayResp 수신 및 T4 추출
  - [x] 시간 오프셋 계산 로직
    - [x] 마스터-슬레이브 시간차 계산
    - [x] 경로 지연 계산 및 보정
    - [x] 오프셋 필터링 및 안정화 메커니즘

### 모듈 4: 기본 소프트웨어 PLL
- [x] 간단한 PLL 알고리즘 구현
  - [x] 위상 비교기 (Phase Detector) 구현
  - [x] 루프 필터 (Loop Filter) 구현
  - [x] 전압 제어 발진기 (VCO) 구현
  - [x] PLL 상태 관리 및 업데이트 로직
- [x] 기본 필터링 메커니즘
  - [x] 이동 평균 필터 구현
  - [x] 지수 가중 이동 평균 필터 구현
  - [x] 이상치 (Outlier) 감지 및 제거 로직
- [x] 로컬 클록 조정 기본 기능
  - [x] 주파수 조정 메커니즘
  - [x] 위상 조정 메커니즘
  - [x] 조정값 적용 및 안정화 로직

### 모듈 5: 기본 프레임 동기화
- [x] 언리얼 엔진 틱(Tick) 후킹
  - [x] 엔진 틱 델리게이트 연결
  - [x] 틱 이벤트 처리 함수 구현
  - [x] 렌더링 파이프라인 이벤트 후킹
- [x] 프레임 카운터 구현
  - [x] 동기화된 프레임 카운터 관리
  - [x] 프레임 번호 네트워크 동기화
  - [x] 프레임 번호 불일치 감지 및 수정
- [x] 기본 프레임 타이밍 조정 메커니즘
  - [x] 프레임 지연/가속 로직 구현
  - [x] 타겟 프레임 레이트 제어 기능
  - [x] 프레임 타이밍 조정값 계산

### 모듈 간 통합
- [x] FTimeSync와 FPTPClient 통합
  - [x] FTimeSync에서 PTP 클라이언트 관리
  - [x] 네트워크 메시지 처리 및 전달
  - [x] 동기화 상태 및 오프셋 관리
- [x] FTimeSync와 FSoftwarePLL 통합
  - [x] PTP 측정값을 PLL에 전달
  - [x] PLL 출력을 시간 조정에 적용
  - [x] 상태 모니터링 및 진단 로직
- [x] 네트워크 매니저 연동
  - [x] 시간 동기화 메시지 전송 함수 추가
  - [x] 시간 동기화 메시지 수신 처리 로직 추가
  - [x] 프레임워크 매니저를 통한 모듈 간 참조 설정

### 단계 3 테스트 및 검증
- [x] 기본 시간 동기화 정확도 측정
  - [x] 타임스탬프 정확도 검증
  - [x] 마스터-슬레이브 간 시간 오프셋 측정
  - [x] 경로 지연 측정 및 안정성 검증
- [x] 두 인스턴스 간 시간 차이 시각화
  - [x] 시간 오프셋 로깅 및 그래프 생성
  - [x] 동기화 진행 상황 시각화
  - [x] 오류 상황 감지 및 보고
- [x] 프레임 타이밍 로깅 및 분석
  - [x] 프레임 간격 측정 및 로깅
  - [x] 프레임 지터 분석
  - [x] 프레임 동기화 정확도 측정
- [x] 전체 시스템 기본 기능 통합 테스트
  - [x] 마스터-슬레이브 전환 테스트
  - [x] 다양한 네트워크 조건에서의 동작 테스트
  - [x] 장시간 안정성 테스트

---

## 📋 단계 4: 마스터-슬레이브 프로토콜 및 고급 기능 개발 (4-5주)

### 모듈 2 확장: 고급 네트워크 기능
- [x] 마스터-슬레이브 프로토콜 구현
  - [x] 마스터-슬레이브 메시지 타입 정의
    - [x] MasterAnnouncement - 마스터가 자신의 상태를 알림
    - [x] MasterQuery - 마스터 정보 요청
    - [x] MasterResponse - 마스터 정보 응답
    - [x] MasterElection - 마스터 선출 시작
    - [x] MasterVote - 마스터 선출 투표
    - [x] MasterResign - 마스터 사임 알림
    - [x] RoleChange - 역할 변경 알림
  - [x] 마스터 선출 알고리즘 구현
    - [x] 선출 시작 메커니즘 (StartMasterElection)
    - [x] 우선순위 기반 투표 시스템 (CalculateVotePriority)
    - [x] 투표 결과 처리 및 마스터 결정 (TryBecomeMaster)
    - [x] 선출 타임아웃 처리 (ELECTION_TIMEOUT_SECONDS)
  - [x] 역할 전환 메커니즘 구현
    - [x] 마스터 상태 공지 (AnnounceMaster)
    - [x] 마스터 사임 처리 (ResignMaster)
    - [x] 역할 변경 알림 (UpdateMasterStatus, SendRoleChangeNotification)
  - [x] 메시지 처리기 구현
    - [x] HandleMasterAnnouncement - 마스터 공지 메시지 처리
    - [x] HandleMasterQuery - 마스터 정보 요청 처리
    - [x] HandleMasterResponse - 마스터 정보 응답 처리
    - [x] HandleMasterElection - 마스터 선출 메시지 처리
    - [x] HandleMasterVote - 마스터 투표 메시지 처리
    - [x] HandleMasterResign - 마스터 사임 메시지 처리
    - [x] HandleRoleChange - 역할 변경 메시지 처리
  - [x] 정기적인 상태 관리 구현
    - [x] 마스터 타임아웃 체크 (CheckMasterTimeout)
    - [x] 주기적 마스터 공지 (TickMasterSlaveProtocol)
    - [x] 틱 기능 연결 (MasterSlaveProtocolTick)
- [x] 단일 프로젝트 설정 공유 시스템
  - [x] 전역 설정 구조체 정의 (FProjectSettings)
  - [x] 설정 직렬화/역직렬화 기능
  - [x] 마스터 설정 변경 실시간 전파
  - [x] 설정 충돌 해결 메커니즘
- [ ] 네트워크 지연 측정 및 분석
  - [ ] 왕복 시간(RTT) 측정 구현
  - [ ] 지연 통계 수집 및 분석
  - [ ] 네트워크 상태 정보 제공
- [ ] 신뢰성 있는 메시지 전달 보장
  - [ ] 메시지 확인 및 재전송 메커니즘
  - [ ] 메시지 시퀀스 관리
  - [ ] 중복 메시지 처리

### 모듈 3 확장: 고급 PTP 기능
- [ ] 완전한 PTP 상태 머신 구현
- [ ] 경로 지연 측정 및 보정
- [ ] 비대칭 지연 처리

### 모듈 4 확장: 고급 PLL 기능
- [ ] 적응형 필터링 알고리즘
- [ ] 클록 드리프트 예측 및 보정
- [ ] 이상치 감지 및 처리

### 단계 4 테스트 및 검증
- [x] 마스터-슬레이브 프로토콜 테스트
  - [x] 마스터 선출 과정 검증
  - [x] 역할 전환 정확성 확인
  - [x] 메시지 처리 로직 검증
- [x] 단일 프로젝트 설정 공유 테스트
  - [x] 설정 직렬화/역직렬화 검증
  - [x] 설정 전파 확인
  - [x] 설정 충돌 해결 확인
- [ ] 마스터 장애 시 페일오버 테스트
- [ ] 다양한 네트워크 조건에서의 동기화 정확도 테스트
- [ ] 장시간 실행 안정성 테스트
- [ ] 성능 최적화 및 CPU 사용량 분석

---

## 📋 단계 5: 고급 프레임 동기화 및 렌더링 통합 (3-4주)

### 모듈 5 확장: 고급 프레임 동기화
- [ ] 프레임 버퍼링 시스템 구현
- [ ] GPU 명령 제출 타이밍 제어
- [ ] 렌더링 파이프라인 깊은 통합
- [ ] 지터 보상 메커니즘

### 모듈 6: nDisplay 통합 (선택적)
- [ ] nDisplay API 연동
- [ ] 클러스터 동기화 활용
- [ ] nDisplay 설정과 동기화 설정 통합

### 모듈 7: 물리 시뮬레이션 동기화
- [ ] 물리 엔진 틱 후킹
- [ ] 결정적 물리 시뮬레이션 보장
- [ ] 물리 상태 검증 및 보정

### 단계 5 테스트 및 검증
- [ ] 시각적 프레임 동기화 정확도 테스트
- [ ] 인터랙티브 콘텐츠 동기화 테스트
- [ ] 다양한 하드웨어 구성에서 테스트
- [ ] 전체 시스템 통합 테스트
- [ ] 단일 프로젝트 일관성 테스트
  - [ ] 여러 서버가 하나의 통합된 경험으로 작동하는지 검증
  - [ ] 사용자 인터랙션이 모든 서버에 일관되게 적용되는지 확인
  - [ ] 프로젝트의 전역 상태 동기화 검증

---

## 📋 단계 6: 사용자 인터페이스 및 최적화 (2-3주)

### 모듈 8: 사용자 인터페이스
- [ ] 설정 인터페이스 구현
- [ ] 동기화 상태 모니터링 UI
- [ ] 진단 및 디버깅 도구
- [ ] 설정 저장 및 로드 기능

### 최적화 및 안정화
- [ ] 성능 프로파일링 및 병목 현상 식별
- [ ] 메모리 사용량 최적화
- [ ] CPU 사용량 최적화
- [ ] 오류 처리 및 복구 메커니즘 강화

### 문서화
- [ ] 사용자 매뉴얼 작성
- [ ] API 문서 작성
- [ ] 설치 및 설정 가이드
- [ ] 문제 해결 가이드

### 단계 6 테스트 및 검증
- [ ] 사용자 인터페이스 사용성 테스트
- [ ] 여러 환경에서의 최종 성능 테스트
- [ ] 문서 정확성 검증
- [ ] 최종 품질 보증 테스트

---

## 📋 단계 7: 배포 준비 및 최종 테스트 (1-2주)

### 배포 준비
- [ ] 버전 관리 및 릴리스 노트 작성
- [ ] 설치 패키지 생성
- [ ] 라이센스 및 법적 검토
- [ ] 마켓플레이스 제출 준비(해당 시)

### 최종 테스트
- [ ] 설치 및 제거 테스트
- [ ] 다양한 언리얼 엔진 버전 호환성 테스트
- [ ] 다양한 하드웨어 구성에서 테스트
- [ ] 극단적 사용 사례 테스트

### 피드백 및 개선
- [ ] 초기 사용자 피드백 수집
- [ ] 우선순위가 높은 개선 사항 구현
- [ ] 알려진 문제 문서화

### 릴리스
- [ ] 최종 빌드 생성
- [ ] 문서 및 리소스 패키징
- [ ] 공개 릴리스 또는 제한된 베타 릴리스