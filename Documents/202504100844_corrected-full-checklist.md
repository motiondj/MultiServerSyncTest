# Multi-Server Sync Framework 프로젝트 체크리스트

## 단계 1: 초기 프로젝트 설정 및 기본 구조 (1-2주)

### 모듈 1: 프레임워크 핵심 구조
- [x] 플러그인 기본 구조 설정
  - [x] 모듈 분리 (런타임, 에디터)
  - [x] 빌드 설정 구성
  - [x] 의존성 관리
- [x] 핵심 인터페이스 정의
  - [x] 환경 감지 인터페이스 (IEnvironmentDetector)
  - [x] 네트워크 관리 인터페이스 (INetworkManager)
  - [x] 시간 동기화 인터페이스 (ITimeSync)
  - [x] 프레임 동기화 인터페이스 (IFrameSyncController)
- [x] 프레임워크 매니저 구현
  - [x] 모듈 간 상호작용 관리
  - [x] 인터페이스 액세스 제공
  - [x] 초기화 및 종료 프로세스
- [x] 로깅 시스템 구현
  - [x] 로그 수준별 메시지 처리
  - [x] 파일 로깅 지원
  - [x] 개발자 디버깅 지원

### 모듈 2: 환경 감지 시스템
- [x] 네트워크 환경 감지
  - [x] 네트워크 인터페이스 스캔
  - [x] 멀티캐스트 지원 확인
  - [x] 기본 네트워크 설정 결정
- [x] 하드웨어 장치 감지
  - [x] 젠락(Genlock) 하드웨어 감지
  - [x] GPU 동기화 지원 확인
  - [x] 특수 하드웨어 정보 수집
- [x] 소프트웨어 환경 감지
  - [x] nDisplay 모듈 감지
  - [x] 언리얼 엔진 버전 확인
  - [x] 관련 플러그인 감지
- [x] 에디터 통합
  - [x] 환경 정보 UI 표시
  - [x] 설정 권장 사항 제공
  - [x] 경고 및 오류 표시

## 단계 2: 네트워크 통신 및 시간 동기화 (2-3주)

### 모듈 3: 네트워크 통신 기초
- [x] 소켓 관리
  - [x] UDP 소켓 생성 및 관리
  - [x] 브로드캐스트 지원
  - [x] 멀티캐스트 지원
- [x] 서버 탐색 프로토콜
  - [x] 자동 서버 탐색 구현
  - [x] 서버 정보 교환
  - [x] 서버 목록 관리
- [x] 메시지 형식 정의
  - [x] 메시지 헤더 구조 설계
  - [x] 메시지 타입 정의
  - [x] 데이터 직렬화/역직렬화
- [x] 비동기 메시지 처리
  - [x] 메시지 수신 스레드 구현
  - [x] 콜백 메커니즘 구현
  - [x] 메시지 디스패치 시스템

### 모듈 4: 시간 동기화 시스템
- [x] PTP(Precision Time Protocol) 클라이언트 구현
  - [x] PTP 메시지 형식 구현
  - [x] 시간 동기화 알고리즘 구현
  - [x] 마스터-슬레이브 시간 동기화
- [x] 소프트웨어 PLL 구현
  - [x] 위상 잠금 루프 알고리즘
  - [x] 클록 드리프트 보정
  - [x] 안정적인 시간 추적
- [x] 고정밀 타임스탬프 지원
  - [x] 하드웨어 타이머 활용
  - [x] 마이크로초 단위 정밀도
  - [x] 시간 변환 유틸리티
- [x] 블루프린트 인터페이스 구현
  - [x] 시간 동기화 제어 함수
  - [x] 상태 모니터링 함수
  - [x] 디버깅 함수

## 단계 3: 프레임 동기화 및 기본 마스터-슬레이브 프로토콜 (3-4주)

### 모듈 5: 프레임 동기화 컨트롤러
- [x] 프레임 번호 관리
  - [x] 글로벌 프레임 카운터 구현
  - [x] 프레임 번호 동기화
  - [x] 프레임 점프 처리
- [x] 엔진 통합
  - [x] 렌더링 사이클 연결
  - [x] 틱 타이밍 조정
  - [x] 프레임 타이밍 제어
- [x] 동기화 알고리즘
  - [x] 프레임 지연 계산
  - [x] 프레임 타이밍 조정
  - [x] 프레임 레이트 제어
- [x] 블루프린트 인터페이스 구현
  - [x] 동기화 제어 함수
  - [x] 상태 모니터링 함수
  - [x] 디버깅 함수

### 모듈 6: 마스터-슬레이브 프로토콜 기초
- [x] 마스터 선출 알고리즘
  - [x] 우선순위 기반 선출
  - [x] 선출 프로세스 관리
  - [x] 마스터 변경 처리
- [x] 역할 관리
  - [x] 마스터-슬레이브 역할 정의
  - [x] 역할 전환 관리
  - [x] 상태 모니터링
- [x] 연결 관리
  - [x] 마스터 상태 확인
  - [x] 슬레이브 상태 관리
  - [x] 연결 복원 메커니즘
- [x] 이벤트 시스템
  - [x] 역할 변경 이벤트
  - [x] 연결 상태 이벤트
  - [x] 이벤트 핸들러 구현

## 단계 4: 마스터-슬레이브 프로토콜 및 고급 기능 개발 (4-5주)

### 모듈 7: 마스터-슬레이브 프로토콜 고급화
- [x] 내결함성 개선
  - [x] 마스터 장애 복구
  - [x] 슬레이브 장애 감지
  - [x] 자동 재연결
- [x] 로드 밸런싱
  - [x] 마스터 부하 모니터링
  - [x] 동적 마스터 선출 우선순위
  - [x] 부하 분산 전략
- [x] 분산 합의 알고리즘
  - [x] 정족수 기반 의사 결정
  - [x] 상태 일관성 보장
  - [x] 갈등 해결
- [x] 블루프린트 인터페이스 확장
  - [x] 고급 제어 함수
  - [x] 상태 모니터링 확장
  - [x] 디버깅 확장

### 모듈 2 확장: 고급 네트워크 기능
- [x] 설정 동기화
  - [x] 프로젝트 설정 구조 정의
  - [x] 설정 직렬화/역직렬화
  - [x] 네트워크를 통한 설정 공유
- [x] 설정 관리 시스템
  - [x] 로컬 설정 저장/로드
  - [x] 설정 변경 이벤트
  - [x] 유효성 검사
- [x] 네트워크 지연 측정 및 분석
  - [x] 기본 측정 메커니즘 구현
    - [x] FPingMessage 구조체 정의
    - [x] 핑 요청/응답 메시지 타입 정의
    - [x] 메시지 직렬화/역직렬화 함수 구현
  - [x] 핑 메시지 처리 시스템
    - [x] SendPingRequest/SendPingResponse 함수 구현
    - [x] HandlePingRequest/HandlePingResponse 메서드 구현
    - [x] 시퀀스 번호 기반 요청-응답 매칭
    - [x] 대기 중인 핑 요청 관리
  - [x] 지연 통계 기초 구현
    - [x] FNetworkLatencyStats 구조체 정의
    - [x] RTT 샘플 추가 및 기본 통계 계산 구현
    - [x] 표준 편차 및 지터 계산 알고리즘 구현
    - [x] 통계 저장 및 관리 기본 구조 구현
  - [x] BP 인터페이스 구현
    - [x] 지연 측정 시작/중지 함수
    - [x] 통계 조회 함수
    - [x] 네트워크 품질 평가 함수
  - [x] 네트워크 지연 테스터 컴포넌트
    - [x] BP_NetworkLatencyTester 액터 컴포넌트 구현
    - [x] 자동 측정 및 통계 표시 기능
  - [x] **왕복 시간(RTT) 측정 고급화** (완료)
    - [x] 고정밀 타임스탬프 사용 개선
      - [x] GetHighPrecisionTimestamp 메서드 구현
      - [x] 하드웨어 타이머 사용한 타임스탬프 생성
    - [x] 하드웨어 시간 지원 구현
      - [x] 하드웨어 타이머 보정 메서드 구현
      - [x] UTC 시간 변환 기능 구현
    - [x] 동적 샘플링 레이트 적용
      - [x] 네트워크 상태에 따른 샘플링 간격 자동 조정
      - [x] 연속 타임아웃 감지 및 처리
      - [x] 품질 계수 기반 샘플링 레이트 계산
    - [x] **고급 지연 통계 및 분석** (완료)
      - [x] 백분위수(percentile) 통계 추가 (50%, 95%, 99%)
      - [x] 이상치(outlier) 식별 및 필터링
      - [x] 시간대별 통계 및 추세 분석
    - [x] **네트워크 상태 평가 고도화** (완료)
      - [x] 멀티 메트릭 기반 품질 평가 알고리즘
        - [x] FNetworkQualityAssessment 구조체 정의
        - [x] 지연 시간, 지터, 패킷 손실, 안정성 기반 종합 평가
        - [x] 점수 계산 알고리즘 (0-100) 구현
        - [x] 상세 설명 및 권장 사항 생성
      - [x] 네트워크 상태 변화 감지 및 알림
        - [x] ENetworkEventType 열거형 정의
        - [x] 상태 변화 감지 로직 구현
        - [x] 이벤트 핸들러 및 로깅 구현
      - [x] 블루프린트 인터페이스 확장
        - [x] 고급 품질 평가 BP 함수 추가
        - [x] 이벤트 모니터링 제어 함수 추가
        - [x] 성능 임계값 설정 함수 추가
      - [x] BP_NetworkLatencyTester 컴포넌트 업데이트
        - [x] 새로운 품질 지표 표시 기능 추가
        - [x] 사용자 정의 성능 임계값 설정 기능
        - [x] 이벤트 모니터링 및 표시 기능
- [ ] 신뢰성 있는 메시지 전달 보장
  - [x] 기본 메시지 시퀀스 관리
    - [x] 시퀀스 번호 생성 및 관리 기능
    - [x] 메시지 헤더에 시퀀스 정보 포함
  - [ ] 메시지 확인 및 재전송 메커니즘
    - [x] ACK 메시지 타입 정의
    - [ ] 타임아웃 기반 재전송 로직
    - [ ] 메시지 전송 상태 추적
  - [ ] 고급 메시지 시퀀스 관리
    - [ ] 순서 보장 알고리즘 구현
    - [ ] 누락된 메시지 감지 및 요청
    - [ ] 시퀀스 윈도우 관리
  - [ ] 중복 메시지 처리
    - [ ] 중복 감지 로직 구현
    - [ ] 메시지 캐싱 메커니즘
    - [ ] 멱등성 보장 처리

## 단계 5: 테스트 프레임워크 및 성능 최적화 (5-6주)

### 모듈 8: 테스트 프레임워크
- [ ] 단위 테스트
  - [ ] 각 모듈별 단위 테스트
  - [ ] 엣지 케이스 테스트
  - [ ] 오류 처리 테스트
- [ ] 통합 테스트
  - [ ] 다중 서버 환경 테스트
  - [ ] 마스터-슬레이브 전환 테스트
  - [ ] 동기화 정확도 테스트
- [ ] 성능 테스트
  - [ ] 네트워크 지연 테스트
  - [ ] 처리량 테스트
  - [ ] 확장성 테스트
- [ ] 내결함성 테스트
  - [ ] 네트워크 중단 테스트
  - [ ] 서버 장애 테스트
  - [ ] 복구 메커니즘 테스트

### 모듈 9: 성능 최적화
- [ ] 네트워크 최적화
  - [ ] 메시지 크기 최적화
  - [ ] 메시지 빈도 제어
  - [ ] 대역폭 사용 최적화
- [ ] CPU 사용량 최적화
  - [ ] 알고리즘 효율성 개선
  - [ ] 스레드 사용 최적화
  - [ ] 캐시 효율성 개선
- [ ] 메모리 최적화
  - [ ] 메모리 사용량 감소
  - [ ] 메모리 누수 방지
  - [ ] 가비지 컬렉션 최적화
- [ ] 확장성 개선
  - [ ] 다중 서버 확장성 테스트
  - [ ] 리소스 사용 분석
  - [ ] 병목 현상 해결

## 단계 6: 문서화 및 배포 (6-7주)

### 모듈 10: 문서화
- [ ] API 문서
  - [ ] 인터페이스 문서화
  - [ ] 함수 설명 및 예제
  - [ ] 사용 패턴 설명
- [ ] 사용자 가이드
  - [ ] 기본 설정 가이드
  - [ ] 고급 기능 가이드
  - [ ] 문제 해결 가이드
- [ ] 아키텍처 문서
  - [ ] 모듈 구조 설명
  - [ ] 데이터 흐름 설명
  - [ ] 확장 지점 설명
- [ ] 예제 프로젝트
  - [ ] 기본 예제 구현
  - [ ] 고급 사용 사례 예제
  - [ ] 통합 예제

### 모듈 11: 배포 준비
- [ ] 코드 정리
  - [ ] 코드 스타일 일관성 확인
  - [ ] 주석 개선
  - [ ] 미사용 코드 제거
- [ ] 릴리스 준비
  - [ ] 버전 번호 설정
  - [ ] 변경 로그 작성
  - [ ] 빌드 설정 최적화
- [ ] 라이선스 및 법적 문서
  - [ ] 라이선스 명시
  - [ ] 써드파티 라이선스 확인
  - [ ] 법적 고지 사항 작성
- [ ] 마켓플레이스 준비
  - [ ] 마켓플레이스 페이지 준비
  - [ ] 마케팅 자료 준비
  - [ ] 지원 계획 수립

## 구현 중 발생한 문제점 및 해결 방법

### 1. 변수 재정의 오류
- **문제**: `HardwareTimerInitTime` 변수가 중복 선언되어 컴파일 오류 발생
- **원인**: 동일한 변수를 여러 번 선언했거나, 이전 코드 변경에서 이미 추가된 변수를 다시 추가했을 가능성
- **해결 방법**: FNetworkManager.h 파일에서 중복 선언을 확인하고 제거 - 해결 완료

### 2. 동적 샘플링 관련 문제
- **문제**: 네트워크 상태에 따라 과도하게 빠른 샘플링 또는 과도하게 느린 샘플링이 발생할 가능성
- **해결 방법**: 최소/최대 샘플링 간격을 설정하고, 점진적인 변화를 위한 평활화 로직 추가 - 해결 완료

### 3. 인터페이스 구현 누락 문제
- **문제**: ModuleInterfaces.h에서 새 인터페이스 메서드 선언이 누락되어 컴파일 오류 발생
- **해결 방법**: INetworkManager 인터페이스에 모든 새 메서드를 추가하고 FNetworkManager에서 구현 - 해결 완료

### 4. 로깅 카테고리 참조 오류
- **문제**: NetworkTypes.cpp에서 LogMultiServerSync 로깅 카테고리를 인식하지 못함
- **해결 방법**: FSyncLog.h 헤더 파일을 포함하여 로깅 카테고리에 접근 가능하게 함 - 해결 완료

### 5. 중복 메서드 선언 오류
- **문제**: FNetworkManager.h 파일에서 일부 메서드가 중복 선언되어 컴파일 오류 발생
- **해결 방법**: 중복 선언된 메서드들(SetOutlierFiltering, GetOutlierStats 등)을 제거 - 해결 완료

### 6. 변수 이름 충돌 오류
- **문제**: 'Port'라는 로컬 변수가 클래스 멤버 변수를 가리는 오류 발생
- **해결 방법**: 로컬 변수 이름을 'PortNumber'로 변경하여 클래스 멤버와 구분 - 해결 완료

## 다음 구현 계획

1. **신뢰성 있는 메시지 전달 보장 구현 완료**
   - 타임아웃 기반 재전송 로직 완성
   - 메시지 전송 상태 추적 시스템 구현
   - 순서 보장 알고리즘 구현
   - 누락된 메시지 감지 및 요청 시스템 완성
   - 시퀀스 윈도우 관리 메커니즘 개발
   - 중복 감지 로직 구현
   - 메시지 캐싱 메커니즘 개발
   - 멱등성 보장 처리 기능 구현
   
2. **단계 5: 테스트 프레임워크 및 성능 최적화 착수**
   - 단위 테스트 프레임워크 구축
   - 통합 테스트 시나리오 개발
   - 성능 테스트 도구 개발
   
3. **구현된 기능 테스트 및 최적화**
   - 신뢰성 있는 메시지 전달 시스템 성능 테스트
   - 높은 부하 상황에서의 동작 검증
   - 네트워크 상태 평가 알고리즘 정확도 검증
   
4. **문서화 및 예제 개선**
   - API 문서 업데이트
   - 사용 가이드 및 튜토리얼 작성
   - 샘플 프로젝트 정리